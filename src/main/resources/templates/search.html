<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragments :: head"></div>
  <meta charset="UTF-8" />
  <title>Login</title>
</head>

  <body>
    <nav th:replace="fragments/fragments :: nav"/>
    <section class="container pt-5 mt-5">

      <h2>Search results for "<span th:text="${query}"/>" :</h2>       
      <!--form th:action="@{/search}" method="GET">
        <input type="text" name="query" id="query"/>
        <input type="submit">Search</input>
      </form-->
      
      <ul class="list-unstyled" th:each="user : ${results}">
        <li>
          <span>
            <span th:replace="fragments/fragments :: picture-small"/>
            <span th:text="${user.name}"/>
            <span th:if="${#lists.contains(current.connections, user)}">Friends</span>
            <span th:unless="${#lists.contains(current.connections, user)}">Not friends
              <form th:action="@{/connections/request}" method="post">
                <button class="btn btn-dark ml-5" name="username" th:value="${user.account.username}"type="submit">Request connection</button>
              </form>
            </span>
          </span>
        </li>
      </ul>
    </section>

    <div th:replace="fragments/fragments :: scripts"></div>
    </body>
</html>